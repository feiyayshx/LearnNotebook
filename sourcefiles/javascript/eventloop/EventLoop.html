<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>事件循环</title>
  </head>
  <body>
    <h1>浏览器环境js执行机制</h1>
    <script>
      /**
       * @desc: js案例1
       * @return: timer1 ,promise1 ,timer2 ,promise2
       */

      /*   setImmediate(() => {
        console.log('setImmediate')
      })
      process.nextTick(() => {
        console.log('process')
      })
      console.log('script end')

      setTimeout(() => {
        console.log('timer1')

        Promise.resolve().then(function() {
          console.log('promise1')
        })
      }, 0)

      setTimeout(() => {
        console.log('timer2')

        Promise.resolve().then(function() {
          console.log('promise2')
        })
      }, 0) */

      /**
       * @desc: js案例2
       * @return: script start,async1 start,async2,promise1,script end,
       * async1 end,promise2,setTimeout；
       * @分析：
       */

      /* async function async1() {
        console.log('async1 start')
        await async2()
        console.log('async1 end')  
      }
      async function async2() {
        console.log('async2')
      }
      console.log('script start')
      setTimeout(function() { 
        console.log('setTimeout')
      })
      async1()
      new Promise(function(resolve) {
        console.log('promise1')
        resolve()
      }).then(function() { 
        console.log('promise2')  
      })
      console.log('script end') */

      /**
       * @desc: js案例3
       * @return: script start,async1 start,async2,promise1,promise2,script end,
       * async1 end,promise3,setTimeout1,setTimeout2；
       * @分析：
       */

      async function async1() {
        console.log('async1 start')
        await async2()
        console.log('async1 end')
      }
      async function async2() {
        console.log('async2')
      }
      console.log('script start')
      setTimeout(function() {
        console.log('setTimeout1')
      }, 0)
      setTimeout(function() {
        console.log('setTimeout2')
      }, 3)
      async1()
      new Promise(function(resolve) {
        console.log('promise1')
        resolve()
        console.log('promise2')
      }).then(function() {
        console.log('promise3')
      })
      console.log('script end')

      /**
       * @desc: js案例4
       * @return: 1,7,8,2,4,5,9,11,12
       *
       * @分析：
       */
      /* console.log('1')
      setTimeout(function() {
        console.log('2')
        new Promise(function(resolve) {
          console.log('4')
          resolve()
        }).then(function() {
          console.log('5')
        })
      })
      new Promise(function(resolve) {
        console.log('7')
        resolve()
      }).then(function() {
        console.log('8')
      })

      setTimeout(function() {
        console.log('9')
        new Promise(function(resolve) {
          console.log('11')
          resolve()
        }).then(function() {
          console.log('12')
        })
      }) */
    </script>
  </body>
</html>
